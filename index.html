<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="author" content="Kane Dou">
<link rel="shortcut icon" href="/favicon.ico">
<link href="/feed.xml" rel="alternate" title="kandou.me" type="application/rss+xml">
<link rel="stylesheet" href="/assets/stylesheets/screen.css" />
<link rel="stylesheet" href="/assets/stylesheets/syntax.css" />
<title>
  kanedou.me
</title>

  </head>
  <body>
    <div class="container">
      <header id="masthead">
        <div class="row-fluid">
          <div class="span3 branding">
            <h1>
              <a href="/">kanedou.me</a>
            </h1>
          </div>
          <div class="span5 navigation">
            <nav role="navigation">
  <ul class="nav nav-pills">
    <li><a href="/archive.html"><span>archive</span></a></li>
    <li><a href="/links.html"><span>links</span></a></li>
    <li><a href="/about.html"><span>about</span></a></li>
    <li><a href="/feed.xml"><span>feed</span></a></li>
  </ul>
</nav>

          </div>
        </div>
      </header>
      <div id="content">
        <div class="blog-index">
  
  
  
  
<article role="article" class="well">
  <header>
    <section class="title">
      <h1>
        
        <a href="/2014/06/the-bund-and-around-and-you/">the Bund and Around and You</a>
        
      </h1>
    </section>
    <section class="meta">
      @<time>2014-06-08</time>
      <span class="categories">
        
        <em class="category">#photograph</em>
        
      </span>
    </section>
  </header>
  <section class="post">
    <p><a href="http://500px.com/photo/72946039/hole-in-bush-by-kane-dou">
  <img class="oob" src="http://pic.yupoo.com/kols/DOzLBUGc/4xylO.jpg" alt="Photograph hole in bush by Kane Dou on 500px" />
</a></p>

<hr />

<p><a href="http://500px.com/photo/72946037/sand-over-river-by-kane-dou">
  <img class="oob" src="http://pic.yupoo.com/kols/DOzLLXMl/ebtSm.jpg" alt="Photograph sand over river by Kane Dou on 500px">
</a></p>

<hr />

<p><a href="http://500px.com/photo/72946041/crowd-and-the-opposite-by-kane-dou">
  <img class="oob" src="http://pic.yupoo.com/kols/DOzLH6BR/EL1Iy.jpg" alt="Photograph crowd and the opposite by Kane Dou on 500px">
</a></p>

<hr />

<p><a href="http://500px.com/photo/72946043/long-lasting-building-by-kane-dou">
  <img class="oob" src="http://pic.yupoo.com/kols/DOzLjwEN/NEfAL.jpg" alt="Photograph long-lasting building by Kane Dou on 500px">
</a></p>

<hr />

<p><a href="http://500px.com/photo/72946045/chandelier-by-kane-dou">
  <img class="oob" src="http://pic.yupoo.com/kols/DOzLDELx/7ReNm.jpg" alt="Photograph chandelier by Kane Dou on 500px">
</a></p>

<hr />

<p>这些是六月第一个周末出去经过外滩时拍的。</p>

<p>主要用了 Hipstamatic 的 BlacKeys SuperGrain 和 BlacKeys Extra Fine 两种胶卷。</p>

<p>黑与白，稳固的构图，强烈的对比和高锐度很有表现力。</p>

<p>雾蒙蒙的天，以及对现状、即将来到的改变的不确定感也是贡献之二。</p>

<p>就像老友说的，“这几张黑白的都很赞！”“我也觉得。”</p>

  </section>
</article>

  
  
  
<article role="article" class="well">
  <header>
    <section class="title">
      <h1>
        
        <a href="/2014/04/how-about-restart/">How About Restart?</a>
        
      </h1>
    </section>
    <section class="meta">
      @<time>2014-04-14</time>
      <span class="categories">
        
        <em class="category">#living</em>
        
        <em class="category">#work</em>
        
      </span>
    </section>
  </header>
  <section class="post">
    <p>在这个月初，我辞职了。</p>

<p>从很久以前，我已经记不清何时开始的时候，我就想辞职了。只是一直没有做，不是没有
理由，而是没有一个决心。所以当那次我走在回家路上——这条我走过无数次，被那么多来
而又去的人们陪着的路上——我突然就决定这么做了，我甚至还想给这件事抹上一些浪漫色
彩（本想在生日当天提出的）。于是很快地在几天后我就真的宣告了要离开这个待了两年
半的地方。然后在一种强烈的”快要离开这里了“的感觉中，于月底走了。</p>

<p>这不是毫无理由的头脑发热，当然也没有什么完全的深思熟虑。到了这一天，事情就只能
如此发生，剩下的，就是我说过的那个决心，甚至决心也只是一种自我暗示的说辞。在心
里某处，我明白为什么会如此快地决定了，但事实上，我只是还有这么做的自由，我只是
特别想这么做，在那一刻，我只是不愿意什么都不做。</p>

<p>而每每事情发生，人改变，并离当时的自己越来越远的时候，就会有新的不一样的，或是
旧的从来就在那里的想法产生出来。当距离感、不安全感、不稳定感全部涌上心头的时候
，当这个世界在每个早晨以一种让人难过但不消极的姿态唤醒你的时候，当每晚一个人走
过那样一条街道然后又想起一些人以及事，当梦中遇见谁白天却无法去见，当这些都还只
是美好或悲伤回忆而不是可以述说的故事，当心中的情感只能以沉默来表达，生活在这样
的时刻总是让人失望，但又在下一个傍晚或阳光稀疏的温暖下午让人重又感受到美好。如
此往复，让人疲惫，但又无法让人不去寄予希望。</p>

<p>而这样看来，我仍然是那个写着这样文字的那个人，很久以来不曾变过。我仍然把他们扔
进头顶的空气中，我捕捉到的还是飘渺忽闪的那些瞬间以及一时的强烈感受。我不能把什
么东西原原本本地写成它的样子，比如我现在讲述的，辞职的理由。这有点像闹别扭，也
是一种总是有所顾忌，无法畅所欲言的毛病。所以重来一遍。</p>

<p>我在面试了，也有了些回应。</p>

<p>我在找好玩/不好玩的演出展览什么的用来打发时间以免每天每天赖在家里变懒：</p>

<ul>
<li>轻罪（结果今天展馆闭馆……）</li>
<li>洛桑艺术学院摄影展</li>
<li>篠原一男的建筑展</li>
<li>如果没什么东西可看就找个没去过的什么地方过去拍些照片什么的，那种平时不可能
会去的地方。</li>
</ul>


<p>我在玩游戏，不错的有：</p>

<ul>
<li>与狼同行</li>
<li>死亡空间</li>
</ul>


<p>我在读书，刚读完了《黄袍魔王》，顶着恐怖小说集的名头却大半是有趣的充斥着景物描
写的言情小说……</p>

<p>我在图书馆看着教程写点代码，学一下 iOS。</p>

<p>我在种些花草。谢谢妳。也谢谢伦哥热情地送了我一大堆大大小小的盆栽，我会想办法照
料好的。</p>

<p>我也在努力对抗那些让我不想做上面这些事情的情绪以及不自制。</p>

<p>总之，这些就是我现在能写及想写的事实。那么，就做好吧。</p>

  </section>
</article>

  
  
  
<article role="article" class="well">
  <header>
    <section class="title">
      <h1>
        
        <a href="/2013/05/hills-like-white-elephants/">Hills Like White Elephants</a>
        
      </h1>
    </section>
    <section class="meta">
      @<time>2013-05-13</time>
      <span class="categories">
        
        <em class="category">#fiction</em>
        
        <em class="category">#literature</em>
        
      </span>
    </section>
  </header>
  <section class="post serif">
    <p>By <em>Ernest Hemingway</em></p>

<p>The hills across the valley of the Ebro were long and white. On this side there
was no shade and no trees and the station was between two lines of rails in the
sun. Close against the side of the station there was the warm shadow of the
building and a curtain, made of strings of bamboo beads, hung across the open
door into the bar, to keep out flies. The American and the girl with him sat at
a table in the shade, outside the building. It was very hot and the express
from Barcelona would come in forty minutes. It stopped at this junction for two
minutes and went to Madrid.</p>

<p>"What should we drink?" the girl asked. She had taken off her hat and put on
the table.<br />
"It's pretty hot," the man said.<br />
"Let's drink beer."<br />
"Dos cervezas," the man said into the curtain.<br />
"Big ones?" a woman asked from the doorway.<br />
"Yes. Two big ones."</p>

<p>The woman brought two glasses of beer and two felt pads. She put the felt pads
and the beer glass on the table and looked at the man and the girl. The girl
was looking off at the line of hills. They were white in the sun and the
country was brown and dry.</p>

<p>"They look like white elephants," she said.<br />
"I've never seen one," the man drank his beer.<br />
"No, you wouldn't have."<br />
"I might have," the man said. "Just because you say I wouldn't have doesn"t
prove anything."<br />
The girl looked at the bead curtain. "They've painted something on it," she
said. "What does it say?"<br />
"Anis del Toro. It's a drink."<br />
"Could we try it?"<br />
The man called "Listen" through the curtain. The woman came out from the bar.
"Four reales." "We want two Anis del Toro."<br />
"With water?"<br />
"Do you want it with water?"<br />
"I don't know," the girl said. "Is it good with water?"<br />
"It's all right."<br />
"You want them with water?" asked the woman.<br />
"Yes, with water."<br />
"It tastes like liquorice," the girl said and put the glass down.<br />
"That's the way with everything."<br />
"Yes," said the girl. "Everything tastes of liquorice. Especially all the
things you've waited so long for, like absinthe."<br />
"Oh, cut it out."<br />
"You started it," the girl said. "I was being amused. I was having a fine
time."<br />
"Well, let's try and have a fine time."<br />
"All right. I was trying. I said the mountains looked like white elephants.
Wasn't that bright?"<br />
"That was bright."<br />
"I wanted to try this new drink. That's all we do, isn't it -- look at things
and try new drinks?"<br />
"I guess so."<br />
The girl looked across at the hills.<br />
"They're lovely hills," she said. "They don't really look like white elephants.
I just meant the colouring of their skin through the trees."<br />
"Should we have another drink?"<br />
"All right."<br />
The warm wind blew the bead curtain against the table.</p>

<p>"The beer's nice and cool," the man said.<br />
"It's lovely," the girl said.<br />
"It's really an awfully simple operation, Jig," the man said. "It's not really
an operation at all."<br />
The girl looked at the ground the table legs rested on.<br />
"I know you wouldn't mind it, Jig. It's really not anything. It's just to let
the air in."<br />
The girl did not say anything.<br />
"I'll go with you and I'll stay with you all the time. They just let the air in
and then it's all perfectly natural."<br />
"Then what will we do afterwards?"<br />
"We'll be fine afterwards. Just like we were before."<br />
"What makes you think so?"<br />
"That's the only thing that bothers us. It's the only thing that's made us
unhappy."<br />
The girl looked at the bead curtain, put her hand out and took hold of two of
the strings of beads.<br />
"And you think then we'll be all right and be happy."<br />
"I know we will. You don't have to be afraid. I've known lots of people that
have done it."<br />
"So have I," said the girl. "And afterwards they were all so happy."<br />
"Well," the man said, "if you don't want to you don't have to. I wouldn't have
you do it if you didn't want to. But I know it's perfectly simple."<br />
"And you really want to?"<br />
"I think it's the best thing to do. But I don't want you to do it if you don't
really want to."<br />
"And if I do it you'll be happy and things will be like they were and you'll
love me?"<br />
"I love you now. You know I love you."<br />
"I know. But if I do it, then it will be nice again if I say things are like
white elephants, and you'll like it?"<br />
"I'll love it. I love it now but I just can't think about it. You know how I
get when I worry."<br />
"If I do it you won't ever worry?"<br />
"I won't worry about that because it's perfectly simple."<br />
"Then I'll do it. Because I don't care about me."<br />
"What do you mean?"<br />
"I don't care about me."<br />
"Well, I care about you."<br />
"Oh, yes. But I don't care about me. And I'll do it and then everything will be
fine."<br />
"I don't want you to do it if you feel that way."<br /></p>

<p>The girl stood up and walked to the end of the station. Across, on the other
side, were fields of grain and trees along the banks of the Ebro. Far away,
beyond the river, were mountains. The shadow of a cloud moved across the field
of grain and she saw the river through the trees.</p>

<p>"And we could have all this," she said. "And we could have everything and every
day we make it more impossible."<br />
"What did you say?"<br />
"I said we could have everything."<br />
"We can have everything."<br />
"No, we can't."<br />
"We can have the whole world."<br />
"No, we can't."<br />
"We can go everywhere."<br />
"No, we can't. It isn't ours any more."<br />
"It's ours."<br />
"No, it isn't. And once they take it away, you never get it back."<br />
"But they haven't taken it away."<br />
"We'll wait and see."<br />
"Come on back in the shade," he said. "You mustn't fell that way."<br />
"I don't feel any way," the girl said. "I just know things."<br />
"I don't want you to do anything that you don't want to do -"<br />
"Nor that isn't good for me," she said. "I know. Could we have another
beer?"<br />
"All right. But you've got to realize -- "<br />
"I realize," the girl said. "Can't we may be stop talking?"<br />
They sat down at the table and the girl looked across at the hills on the dry
side of the valley and the man looked at her and at the table.</p>

<p>"You've got to realize," he said, "that I don't want you to do it if you don't
want to. I'm perfectly willing to go through with it if it means anything to
you."<br />
"Doesn't it mean anything to you? We could get along."<br />
"Of course it does. But I don't want anybody but you. I don't want anyone else.
And I know it's perfectly simple."<br />
"Yes, you know it's perfectly simple."<br />
"It's all right for you to say that, but I do know it."<br />
"Would you do something for me now?"<br />
"I'd do anything for you."<br />
"Would you please please please please please please please stop
talking?"<br />
He did not say anything but looked at the bags against the wall of the
station.<br />
There were labels on them from all the hotels where they had spentl
nights.<br />
"But I don't want you to," he said, "I don't care anything about it."<br />
"I'll scream," the girl said.<br />
The woman came out through the curtains with two glasses of beer and put them
down on the damp felt pads. "The train comes in five minutes," she said.<br />
"What did she say?" asked the girl.<br />
"That the train is coming in five minutes."<br />
The girl smiled brightly at the woman, to thank her.<br />
"I'd better take the bags over to the other side of the station," the man
said.<br />
She smiled at him. "All right. Then come back and we'll finish the beer."</p>

<p>He picked up the two heavy bags and carried them around the station to the
other tracks. He looked up the tracks but could not see the train. Coming back,
he walked through the bar-room, where people waiting for the train were
drinking. He drank an Anis at the bar and looked at the people. They were all
waiting reasonably for the train. He went out through the bead curtain. She was
sitting at the table and smiled at him.</p>

<p>"Do you feel better?" he asked.<br />
"I feel fine," she said. "There's nothing wrong with me. I feel fine."</p>

<hr />

<p>抄自：<a href="http://www.asdk12.org/staff/grenier_tom/HOMEWORK/208194_Hills_Like_White_Elephants.pdf">Hills Like White Elephants (pdf)</a></p>

<hr />

<p>『白象似的群山』所记述的是不调和的冲突，及谜一般的意识与情感的流动。每次读都会
有新的细节浮现出来是她的魅力，但这不是真正隐藏在文本中的细节，而是你自己的经历
的又一次重现。</p>

<p>为何她会看到群山似白象？<br />
“让空气进去，就这么简单。”<br />
“如果你觉得不好那就不要做。”<br />
“如果这对你而言有任何意义的话那就不要做。”<br />
“这对你就没有一点儿意义吗？”</p>

<p>虽然这些稀松平常的对话看似没有什么深意，但一旦把自己代入小说的情景中之后你会选
择靠向一边，这种下意识自然而然的选择总是与你当下的状况相关联。你可能忏悔，也可
能同情，或是愤怒，甚至不屑一顾，这都是人的感觉，因为人会移情，因此才有共鸣。而
让这种联系更进一步深入的就是这文字中太多太多省略了的背景交代，她无从来，也无从
去，她是细节的堆积，和不动声色中两人无力的撕扯，在一个空旷的车站，和一个褐黄、
燥热的国度。</p>

<p>都说含蓄的美是东方的特色，但这篇作品中海明威所表现出的克制与冷静却是实实在在厚
实有力的。这让我想到『断背山』，没有喧哗激烈的交锋，只是平静的言辞和一些笨拙的
行为就将整个叙事撑起。</p>

<p>她没法表现更多，感受更多，诉说更多，只是：</p>

<blockquote><p>"I don't feel any way," the girl said. "I just know things."</p></blockquote>

<p>故事也就到此为止了。</p>

<hr />

<p>See also:</p>

<ul>
<li><a href="http://blog.anguscroll.com/how-to-read-a-book/">How to Read a Book</a></li>
<li><a href="http://en.wikipedia.org/wiki/Hills_Like_White_Elephants">http://en.wikipedia.org/wiki/Hills_Like_White_Elephants</a></li>
</ul>


  </section>
</article>

  
  
  
<article role="article" class="well">
  <header>
    <section class="title">
      <h1>
        
        <a href="/2013/04/go-composition/">go composition</a>
        
      </h1>
    </section>
    <section class="meta">
      @<time>2013-04-14</time>
      <span class="categories">
        
        <em class="category">#programming</em>
        
        <em class="category">#go</em>
        
      </span>
    </section>
  </header>
  <section class="post">
    <p>go 没有 inheritance，只有基于 interface 的 composition，但它提供了类似继承的 embedding 来使这一过程尽可能简洁。这里就用具体示例来说一下如何做。</p>

<p>假设我需要两个图片 URL 生成器，它能根据 http 请求来源生成相应的图片 URL 集合，例如从 mobile 来的请求我为其生成 original, cover 两个 URL，而从 desktop 来的请求则生成 original, preview 和 thumbnail 三个 URL。</p>

<p>整理一下需求：首先是 original, cover, preview 及 thumbnail 这四个基础的实际生成 URL 的生成器，然后是 mobile 及 desktop 这两个构筑在前四者之上的抽象分类。</p>

<div class="highlight"><pre><code class="language-go" data-lang="go"><span class="k">type</span><span class="x"> </span><span class="n">OriginalUrlBuilder</span><span class="x"> </span><span class="k">interface</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">OriginalUrl</span><span class="p">()</span><span class="x"> </span><span class="kt">string</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">CoverUrlBuilder</span><span class="x"> </span><span class="k">interface</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">CoverUrl</span><span class="p">()</span><span class="x"> </span><span class="kt">string</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">PreviewUrlBuilder</span><span class="x"> </span><span class="k">interface</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">PreviewUrl</span><span class="p">()</span><span class="x"> </span><span class="kt">string</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">ThumbnailUrlBuilder</span><span class="x"> </span><span class="k">interface</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">ThumbnailUrl</span><span class="p">()</span><span class="x"> </span><span class="kt">string</span><span class="x">
</span><span class="p">}</span></code></pre></div>


<p>这里我们先声明了四种不同 URL 的 interface，这是为了之后的 composition 更方便。</p>

<div class="highlight"><pre><code class="language-go" data-lang="go"><span class="k">type</span><span class="x"> </span><span class="n">OriginalUrlBuilder</span><span class="x"> </span><span class="k">interface</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">OriginalUrl</span><span class="p">()</span><span class="x"> </span><span class="kt">string</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">Original</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">image</span><span class="x"> </span><span class="o">*</span><span class="n">models</span><span class="o">.</span><span class="n">Image</span><span class="x">  </span><span class="c">// a model, the source we use to generate the URL, just a stab to complete the logic, pay no attention to it.</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">o</span><span class="x"> </span><span class="n">Original</span><span class="p">)</span><span class="x"> </span><span class="n">OriginalUrl</span><span class="p">()</span><span class="x"> </span><span class="kt">string</span><span class="x"> </span><span class="p">{</span><span class="c">// generate original URL}</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">CoverUrlBuilder</span><span class="x"> </span><span class="k">interface</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">CoverUrl</span><span class="p">()</span><span class="x"> </span><span class="kt">string</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">Cover</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">image</span><span class="x"> </span><span class="o">*</span><span class="n">models</span><span class="o">.</span><span class="n">Image</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">c</span><span class="x"> </span><span class="n">Cover</span><span class="p">)</span><span class="x"> </span><span class="n">CoverUrl</span><span class="p">()</span><span class="x"> </span><span class="kt">string</span><span class="x"> </span><span class="p">{</span><span class="c">// generate cover URL}</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">PreviewUrlBuilder</span><span class="x"> </span><span class="k">interface</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">PreviewUrl</span><span class="p">()</span><span class="x"> </span><span class="kt">string</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">Preview</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">image</span><span class="x"> </span><span class="o">*</span><span class="n">models</span><span class="o">.</span><span class="n">Image</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">p</span><span class="x"> </span><span class="n">Preview</span><span class="p">)</span><span class="x"> </span><span class="n">PreviewUrl</span><span class="p">()</span><span class="x"> </span><span class="kt">string</span><span class="x"> </span><span class="p">{</span><span class="c">// generate preview URL}</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">ThumbnailUrlBuilder</span><span class="x"> </span><span class="k">interface</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">ThumbnailUrl</span><span class="p">()</span><span class="x"> </span><span class="kt">string</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">Thumbnail</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">image</span><span class="x"> </span><span class="o">*</span><span class="n">models</span><span class="o">.</span><span class="n">Image</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">t</span><span class="x"> </span><span class="n">Thumbnail</span><span class="p">)</span><span class="x"> </span><span class="n">ThumbnailUrl</span><span class="p">()</span><span class="x"> </span><span class="kt">string</span><span class="x"> </span><span class="p">{</span><span class="c">// generate thumbnail URL}</span></code></pre></div>


<p>声明各个具体的 builder 并实现 interface。接下来是两个分类。</p>

<div class="highlight"><pre><code class="language-go" data-lang="go"><span class="k">type</span><span class="x"> </span><span class="n">Desktop</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="o">*</span><span class="n">Original</span><span class="x">
    </span><span class="o">*</span><span class="n">Preview</span><span class="x">
    </span><span class="o">*</span><span class="n">Thumbnail</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">Mobile</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="o">*</span><span class="n">Original</span><span class="x">
    </span><span class="o">*</span><span class="n">Cover</span><span class="x">
</span><span class="p">}</span></code></pre></div>


<p>这里的实现使用了 struct embedding，这里内嵌了基础 builder 的 pointer，效果是直接将内嵌 struct 的所有 method 带入新声明的 struct。这里有几点需要注意：</p>

<ul>
<li>内嵌的 struct 需要 initialize</li>
<li>在所声明 struct 上调用内嵌 struct 的 method 时其 receiver 为内嵌的 struct 而非其自身：</li>
</ul>


<div class="highlight"><pre><code class="language-go" data-lang="go"><span class="c">// when we call embedded method directly on the outer struct</span><span class="x">
</span><span class="n">d</span><span class="o">.</span><span class="n">CoverUrl</span><span class="p">()</span><span class="x">
</span><span class="c">// it's exactly like first defining this book-keeping method on the outer struct and then calling it</span><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="n">Desktop</span><span class="p">)</span><span class="x"> </span><span class="n">CoverUrl</span><span class="p">()</span><span class="x"> </span><span class="kt">string</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">d</span><span class="o">.</span><span class="n">Cover</span><span class="o">.</span><span class="n">CoverUrl</span><span class="p">()</span><span class="x">  </span><span class="c">// receiver is `Cover' not `Desktop'</span><span class="x">
</span><span class="p">}</span><span class="x">
</span><span class="n">d</span><span class="o">.</span><span class="n">CoverUrl</span><span class="p">()</span></code></pre></div>


<ul>
<li>内嵌 struct 的 field name 为其 unqualified name，即去除 package name 后的部分。</li>
<li><a href="http://golang.org/doc/effective_go.html#embedding">http://golang.org/doc/effective_go.html#embedding</a></li>
</ul>


<p>之后看一下如何实际使用这些 URL builder。</p>

<div class="highlight"><pre><code class="language-go" data-lang="go"><span class="k">func</span><span class="x"> </span><span class="n">GetUrlBuilder</span><span class="p">(</span><span class="n">reqType</span><span class="x"> </span><span class="kt">string</span><span class="p">)</span><span class="x"> </span><span class="p">(</span><span class="n">builder</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">var</span><span class="x"> </span><span class="n">image</span><span class="x"> </span><span class="o">*</span><span class="n">models</span><span class="o">.</span><span class="n">Image</span><span class="x">
    </span><span class="k">switch</span><span class="x"> </span><span class="n">reqType</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">case</span><span class="x"> </span><span class="s">"desktop"</span><span class="o">:</span><span class="x">
        </span><span class="n">o</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">Original</span><span class="p">{</span><span class="n">image</span><span class="p">}</span><span class="x">
        </span><span class="n">p</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">Preview</span><span class="p">{</span><span class="n">image</span><span class="p">}</span><span class="x">
        </span><span class="n">t</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">Thumbnail</span><span class="p">{</span><span class="n">image</span><span class="p">}</span><span class="x">
        </span><span class="n">builder</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">Desktop</span><span class="p">{</span><span class="n">o</span><span class="p">,</span><span class="x"> </span><span class="n">p</span><span class="p">,</span><span class="x"> </span><span class="n">t</span><span class="p">}</span><span class="x">
    </span><span class="k">case</span><span class="x"> </span><span class="s">"mobile"</span><span class="o">:</span><span class="x">
        </span><span class="n">o</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">Original</span><span class="p">{</span><span class="n">image</span><span class="p">}</span><span class="x">
        </span><span class="n">c</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">Cover</span><span class="p">{</span><span class="n">image</span><span class="p">}</span><span class="x">
        </span><span class="n">builder</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">Mobile</span><span class="p">{</span><span class="n">o</span><span class="p">,</span><span class="x"> </span><span class="n">c</span><span class="p">}</span><span class="x">
    </span><span class="k">default</span><span class="o">:</span><span class="x">
        </span><span class="nb">panic</span><span class="p">(</span><span class="s">"Oooops, don't know which type it is!"</span><span class="p">)</span><span class="x">
    </span><span class="p">}</span><span class="x">
    </span><span class="k">return</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">reqType</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">GetRequestTypeFromNowhere</span><span class="p">()</span><span class="x">  </span><span class="c">// fake</span><span class="x">
    </span><span class="n">urlBuilder</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">GetUrlBuilder</span><span class="p">(</span><span class="n">reqType</span><span class="p">)</span><span class="x">
    </span><span class="k">switch</span><span class="x"> </span><span class="n">reqType</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">case</span><span class="x"> </span><span class="s">"desktop"</span><span class="o">:</span><span class="x">
        </span><span class="n">urlBuilder</span><span class="o">.</span><span class="p">(</span><span class="n">OriginalUrlBuilder</span><span class="p">)</span><span class="o">.</span><span class="n">OriginalUrl</span><span class="p">()</span><span class="x">  </span><span class="c">// original URL</span><span class="x">
        </span><span class="n">urlBuilder</span><span class="o">.</span><span class="p">(</span><span class="n">PreviewUrlBuilder</span><span class="p">)</span><span class="o">.</span><span class="n">PreviewUrl</span><span class="p">()</span><span class="x">  </span><span class="c">// preview URL</span><span class="x">
        </span><span class="n">urlBuilder</span><span class="o">.</span><span class="p">(</span><span class="n">ThumbnailUrlBuilder</span><span class="p">)</span><span class="o">.</span><span class="n">ThumbnailUrl</span><span class="p">()</span><span class="x">  </span><span class="c">// thumbnail URL</span><span class="x">
    </span><span class="k">case</span><span class="x"> </span><span class="s">"mobile"</span><span class="o">:</span><span class="x">
        </span><span class="n">urlBuilder</span><span class="o">.</span><span class="p">(</span><span class="n">OriginalUrlBuilder</span><span class="p">)</span><span class="o">.</span><span class="n">OriginalUrl</span><span class="p">()</span><span class="x">  </span><span class="c">// original URL</span><span class="x">
        </span><span class="n">urlBuilder</span><span class="o">.</span><span class="p">(</span><span class="n">CoverUrlBuilder</span><span class="p">)</span><span class="o">.</span><span class="n">CoverUrl</span><span class="p">()</span><span class="x">  </span><span class="c">// cover URL</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span></code></pre></div>


<p><code>GetUrlBuilder()</code> 返回 <code>interface{}</code>，即使用者不知道所返回的究竟是 <code>Desktop</code> 还是 <code>Mobile</code>。因为使用者只需负责使用就可以了，<code>desktop.(PreviewUrlBuilder).PreviewUrl()</code> 对所返回的 builder 先进行 type assertion 再调用相应 interface 中的方法，即我需要一个 preview URL 则我就调用 <code>PreviewUrlBuilder</code> 中的 <code>PreviewUrl()</code> 方法来获取这样一个 URL，除此以外我不需要知道其他任何信息，builder 的种类为何对使用者而言是透明的。而这也是最初声明四个不同基础 builder 的 interface 的好处之一。</p>

<p>最后总结一下这样的程序结构的优点：</p>

<ul>
<li>方便新增抽象分类，例如 <code>PadImageUrlBuilder</code>，使用基础的 builder 组合一下即可。</li>
<li>可根据需要实现多个同种基础 builder，只需实现其 interface 即可，在多个 builder 之间动态替换也没问题。</li>
<li>新增基础 builder 也很容易，声明 interface 并实现，然后在抽象分类中将其 embed 进去即可。</li>
<li>抽象分类对 builder 使用者完全透明，其只需 <code>GetUrlBuilder()</code> 后根据实际需要 type assertion 至相应基础 builder 并调用其方法即可，不需知道这是 desktop 还是 mobile builder。</li>
</ul>


<p>go 应用了这两条面向对象设计原则：</p>

<blockquote><ul>
<li>Favor composition over inheritance.</li>
<li>Program to an interface, not an implementation.</li>
</ul>
</blockquote>

<p>因此其虽非面向对象语言但是仍然有面向对象的痕迹，只是摒弃了设计者所不中意的部分（inheritance），并强调了他们喜欢的地方。在 go 中实现一个设计模式并非水到渠成的，但它所提供的概念及抽象总是在引导你试着去运用，明确地或是潜移默化地。</p>

<p>go 是给人一种相当朴素感觉的语言，当现代语言都在追求各种各样花哨形式（以给程序员提供乐趣，当然也确实很有乐趣）的时候，它仍以一种质朴平淡甚至近乎无聊的形式呈现自己，给你它所为你选择的它所认为重要的，显然漂亮的语法或 syntax sugar 并不在列，然而它居然也是有乐趣的，从少获得多，less is more，这也是另一种我所欣赏的审美态度。</p>

  </section>
</article>

  
  
  
<article role="article" class="well">
  <header>
    <section class="title">
      <h1>
        
        <a href="/2013/03/bioshock-infinite-brought-along/">『Bioshock Infinite』带来的</a>
        
      </h1>
    </section>
    <section class="meta">
      @<time>2013-03-26</time>
      <span class="categories">
        
        <em class="category">#game</em>
        
        <em class="category">#arts</em>
        
      </span>
    </section>
  </header>
  <section class="post">
    <p><img src="http://pic.yupoo.com/kols_v/CJWMsjZA/medium.jpg" alt="Bioshock Infinite" /></p>

<p>游戏作为艺术品是个矛盾体，它的意义需要娱乐来承载，虽然有些电影也是如此，但因为长度往往十个小时起算，因此在游戏中两者并不总是相容的。一点不娱乐的电影可称之为文艺片，但纯文艺而不娱乐大众的游戏估计从来就难以得见天日。因此 『Bioshock』 不断在枪林弹雨之间穿插 Voxophone 录音、Booker 与 Elizabeth 的互动、人性与宿命的考察，枪炮杀戮是前提，维持娱乐水准，后者是内涵，展现制作人真正想告诉你的东西。但由于时长问题，前者却一定是喧宾夺主地占据了玩家最大部分的时间——因此传言中 <abbr title="Metal Gear Solid 4">MGS 4</abbr> 大量过场剧情将玩家操作挤压至接近次要地位的情况，一定是小岛秀夫感受到了这种娱乐与内涵的不调和而做出的回应，但就是这样很简单（当然不简单）地将两者的比例改变一下，也会招致众多玩家的不满，因为游戏，它的第一要素依旧是玩（得爽）——而即使是这样，对于满足快感之余的叙事内容细节的考究、环环相扣的铺垫、精辟带有哲学意味的独白，仍然将整个作品的走向带至艺术品而非娱乐品的行列之中。</p>

<p>即便玩往往是肤浅的，但其体验并非一定与叙事、内涵相矛盾。『旺达与巨像』将对于故事的体验融入到了娱乐内容之中，你在巨像的庞大身躯上攀爬、跌落，狂奔、飞翔，这体验本身就是一种叙事，因为作者把你变成了旺达，你通过手柄感受他的艰难旅途，他甚至从头至尾都不曾说过一句话，让你除了他的肢体，再没有其他什么途径了解他的内心。沉默，往往就是这类游戏的基调，作者只给你一个大的环境与一些小的细节，剩下的全要由你想象，被引导的想象，发散的想象，满足的想象。</p>

<p>然而“娱乐，不论多么有趣，总会有一天厌倦。”这就是粘附在游戏这个想要成为艺术的载体身上的最为严重的缺陷。为了获得内心的感动，你不得不操纵你的角色先杀个尸横遍野，有时候这并不是多么愉快的体验，从而容易让人心生厌倦。电影中永远作为第三者的我们的视角在这时就很有优势，我不用承受任何负担，我可以跳过我不想要的，直入主题，获得满足。</p>

<p>游戏无法分离其表和里，为了得到一样就不能忽略另一样，两者的差异有时却又是如此得大以至于会让人有索性一并放弃的想法。这可能也就是为何游戏只是被戏称为第九艺术而从未真正被冠上艺术品之名的原因。</p>

  </section>
</article>

  
  
  
<article role="article" class="well">
  <header>
    <section class="title">
      <h1>
        
        <a href="/2013/03/motion-picture-diary-i/">电影日记 I</a>
        
      </h1>
    </section>
    <section class="meta">
      @<time>2013-03-09</time>
      <span class="categories">
        
        <em class="category">#motion picture</em>
        
      </span>
    </section>
  </header>
  <section class="post">
    <h2>Play It Again, Sam（呆头鹅）</h2>

<p>中译呆头鹅人如其名，伍迪艾伦把一个又傻又聪明的家伙演得相当神经质（敏感、多虑）
、话唠又不缺不动声色的幽默（“我二十九了，性能力高峰在十年前就结束了”；“不是焦虑
不是惊恐是 homosexual panic”…），说来这也是他的招牌演技了，只不过近年来水准下降
得厉害。向北非谍影借角色来做旁白虽然没法引起我的共鸣（没看过。。。），但却能把
剧情顺当地推进下去同时也有点人格分裂的意味，同时借他人之口来讲述自己的想法，不
会造成矛盾。戴安基顿这部片里长得有点奇怪，但那种呆呆的音调很有意思，同时衣着永
远有品位。虽然没有什么亮点但一演起对手戏就有种相当默契的感觉，不算话唠，但也喜
欢平静地一鸣惊人。她老公比较正常，同时也比较搞，随时报上所在地电话号码印象深刻
。快结束时那一段段臆想的剧情亮点颇多。结局稍有点首尾呼应。</p>

<h2>To Kill a Mocking Bird（杀死一只知更鸟）</h2>

<p>女孩 Scout 叫自己爸爸 Atticus 是让我觉得最棒的细节，一下子把她的天真无拘束和他
的平静稳定显露无遗。节奏很好，把这个伸张正义的片子拍得有点惊悚、有点悬疑又有点
悲哀。但不管怎么绕，父亲的正直，女孩和男孩的活泼，以及最后出场的人物那种让人惊
喜的善良（就像一只知更鸟）都被恰当表现了出来，不会头重脚轻虎头蛇尾。人性是丑恶
与美好并存的，然而即使是恶也并非总是纯粹的恶，而是被大势裹挟了的无知的恶。当嫌
疑人被关到镇里，镇上的居民被煽动想绕过法律直接制裁他，但勇敢的 Scout 的一席话就
改变了他们的态度，救了父亲，同时展现人们的矛盾。庭审是遗憾的，向我们展现了无论
哪个年代的人们都绕不过的那种不公的鄙夷与憎恶，以及努力了、捍卫了但又失败了的无
力。法庭辩论中张弛有度，不言自明的魅力被 Atticus 表现得淋漓尽致。</p>

<h2>I Confess（忏情记）</h2>

<p>恪守原则还是爱？不论哪个都需要勇气支撑。当女主角把一切和盘托出的时候，这个故事
落幕了还是刚刚开始？都不是，只是告诉你你的坦白真诚一文不名。为何探寻真相的人反
而要利用真相来达到自己的目的？因为掺杂了真相的谎言最容易生效。当一系列的巧合都
被联系到作为被告人的男主角身上时，他的沉默只是作为巧合的对立面的必然。当编剧觉
得巧合足够多的时候就给了观众一个解脱，但不那么自然，虽然我认为男主角的自我牺牲
如果真的能打动人，也就只能打动她了吧，以正确的方式。这就牵扯到另一个问题，你的
沉默别人不知缘由，就像你做了艰苦工作但没有人能够看得到，那它是白费了还是总在那
里等待别人的发现？电影说是后者。</p>

  </section>
</article>

  
  <div class="more-archive">
    
    <a href="/archive.html"><div class="circle">&nbsp;</div></a>
    
  </div>
</div>

      </div>
      <footer role="contentinfo" class="contentinfo">
        <div>
  
  
  <span class="copy">&copy; 2004-2014 kane</span>
  |
  <span class="license">
    <a href="http://creativecommons.org/licenses/by/4.0/">license</a>
  </span>
  |
  <span class="engine">
    powered by <a href="http://jekyllrb.com/">jekyll</a> &amp; <a href="http://compass-style.org">compass</a>
  </span>
</div>

      </footer>
    </div>
  </body>
</html>
