<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <!--<link rel="stylesheet" href="/vendor/bootstrap/css/bootstrap.css" />-->
    <link rel="stylesheet" href="/assets/stylesheets/screen.css" />
    <link rel="stylesheet" href="/assets/stylesheets/syntax.css" />
    <script type="text/javascript" src="/vendor/bootstrap/js/bootstrap.js"></script>
    <title>
      MoinMoin的URL优化显示 | kanedou.me
    </title>
  </head>
  <body>
    <div class="container">
      <header>
        <div class="row">
          <section class="site-name">
            <div class="span2">
              <h1><a href="/">kanedou.me</a></h1>
            </div>
          </section>
          <section class="nav">
            <div class="span4">
              <nav role="navigation">
  <ul class="nav nav-pills">
    <li><a href="/archive.html">archive</a></li>
    <li><a href="/links.html">links</a></li>
    <li><a href="/about.html">about</a></li>
  </ul>
</nav>

            </div>
          </section>
        </div>
      </header>
      <div id="content">
        
<article role="article" class="well">
  <header>
    <section class="title">
      <h1>
        
        MoinMoin的URL优化显示
        
      </h1>
    </section>
    <section class="meta">
      @<time>2010-02-19</time>
      <span class="categories">
        
      </span>
    </section>
  </header>
  <section class="post">
    <p>前几天在装 MoinMoin Wiki（下文简称 moin）时遇到的一个问题，记录在这里，可能会对大家有用。</p>

<p>由于 moin 默认是需要用 <code>moin.cgi</code> 这样的脚本来作为入口的，因此在使用中会产生
url 不美观的问题，例如：<code>http://example.com/moin.cgi</code> ，而这显然是不符合我的要求的。</p>

<p>在 Google 一番后找到了方法，而且很多，虽然大都用大同小异的方法来实现，但细节处却基本各有各的写法，这里我只列出我所使用的方法，这花去了我好几个小时反复调试但没有成功，最后却在隔了几天后的一个晚上仅用几分钟便解决了。</p>

<p>首先在位于网站根目录下的 <code>.htaccess</code> 文件中加入如下语句：</p>

<div class="highlight"><pre><code class="apache"><span class="nb">RewriteEngine</span> <span class="k">On</span>
<span class="nb">RewriteBase</span> /
<span class="nb">RewriteRule</span> ^wiki(.*)$ path/to/moin.cgi/$1 [L]
</code></pre></div>


<p>其中第四行的 wiki 可以改成任意希望的路径。在例子中，这会使所有向<code>http://example.com/wiki</code> 发出的请求转发到 <code>moin.cgi</code> 这个脚本文件，同时不改变url 的显示。此时在浏览器中访问 <code>http://example.com/wiki</code> 应该能正常显示 wiki 首页。</p>

<p>之后在 <code>moin.cgi</code> 中加入如下语句:</p>

<div class="highlight"><pre><code class="python"><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;SCRIPT_NAME&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;/wiki&#39;</span>
</code></pre></div>


<p>这句的作用是使 moin 自己生成的 url 显示正常。如果没有这一句，则 wiki 首页 url 在上一步设置后变得正常，但 wiki 中任何一个超链接的 url 都仍然带有 <code>moin.cgi</code>。</p>

<p>现在，整个 wiki 的 url 都应该如预期那样显示了。 最后放一首歌，试试新的插件:p<em>（2012-02-07 更新：歌暂时没了，因为插件没了，因为 WordPress 没了）</em></p>

  </section>
</article>


<section class="comments well">
  <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'kdblue'; // required: replace example with your forum shortname
    var disqus_identifier = 'http://kanedou.me/2010/02/moinmoin-url-optimized-display';
    var disqus_url = 'http://kanedou.me/2010/02/moinmoin-url-optimized-display';
    var disqus_script = 'embed.js';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</section>



      </div>
      <footer role="contentinfo" class="contentinfo">
        <div>
  
  
  <span class="copy">&copy; 2004-2012 kane</span>
  |
  <span class="license">
    <a href="http://creativecommons.org/licenses/by/3.0/cn/">license</a>
  </span>
  |
  <span class="engine">
    powered by <a href="http://jekyllrb.com/">jekyll</a> & <a href="http://compass-style.org">compass</a>
  </span>
</div>

      </footer>
    </div>
  </body>
</html>
